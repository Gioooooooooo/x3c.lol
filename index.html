<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XSS Vulnerability Test By Cakegio</title>

    <!-- external css -->
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- snowfall background -->
    <canvas id="snow"></canvas>

    <!-- main centered site -->
    <div class="site-container">

        <h1>x3c.lol by cakegio</h1>

        <p class="subtitle">
            Enter text below and submit to see it displayed
            (this page is intentionally vulnerable for testing!):
        </p>

        <textarea id="userInput" placeholder="Type something here..."></textarea>

        <br>

        <button onclick="submitText()">Submit</button>

        <h2>Stored Input:</h2>

        <div id="displayArea">No input yet.</div>

    </div>

    <!-- XSS test logic -->
    <script>
        let storedInput = [];

        function submitText() {
            const userInput = document.getElementById("userInput").value.trim();
            if (!userInput) return;

            storedInput.push(userInput);
            renderAllInputs();
        }

        function renderAllInputs() {
            if (storedInput.length === 0) {
                displayArea.innerHTML = "No input yet.";
                return;
            }

            let html = "<h3>Stored Inputs:</h3>";

            storedInput.forEach((input, i) => {
                // intentionally vulnerable render
                html += `<div><strong>Submission ${i + 1}:</strong> ${input}</div>`;
            });

            document.getElementById("displayArea").innerHTML = html;
        }
    </script>

    <!-- snowfall animation -->
    <script>
        const snowCanvas = document.getElementById("snow");
        const snowCtx = snowCanvas.getContext("2d");

        function resizeSnow() {
            snowCanvas.width = window.innerWidth;
            snowCanvas.height = window.innerHeight;
        }

        window.addEventListener("resize", resizeSnow);
        resizeSnow();

        const FLAKE_COUNT = 140;
        const flakes = [];

        function initSnow() {
            flakes.length = 0;

            for (let i = 0; i < FLAKE_COUNT; i++) {
                flakes.push({
                    x: Math.random() * snowCanvas.width,
                    y: Math.random() * snowCanvas.height,
                    r: Math.random() * 2.5 + 1,
                    s: Math.random() * 1 + 0.3,
                    w: Math.random() * 1.5 - 0.75
                });
            }
        }

        function updateSnow() {
            for (const f of flakes) {
                f.y += f.s;
                f.x += f.w;

                if (f.y > snowCanvas.height) {
                    f.y = -10;
                    f.x = Math.random() * snowCanvas.width;
                }

                if (f.x > snowCanvas.width) f.x = 0;
                if (f.x < 0) f.x = snowCanvas.width;
            }
        }

        function drawSnow() {
            snowCtx.clearRect(0, 0, snowCanvas.width, snowCanvas.height);

            snowCtx.fillStyle = "rgba(255, 255, 255, 0.9)";
            snowCtx.beginPath();

            for (const f of flakes) {
                snowCtx.moveTo(f.x, f.y);
                snowCtx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
            }

            snowCtx.fill();

            updateSnow();
            requestAnimationFrame(drawSnow);
        }

        initSnow();
        drawSnow();
    </script>

</body>
</html>
